import{a as f,r as b,j as e}from"./app-CmjdSMvU.js";import{I as u}from"./InputLabel-DyeBRmEs.js";import{T as p}from"./TextArea-BKXniEHM.js";import{D as h}from"./DragFileInput-BCATiycV.js";import{I as d}from"./InputError-MwXv_bOv.js";import{P as j}from"./PrimaryButton-DmmwwnBh.js";import{S as _}from"./SecondaryButton-CKGMLTKC.js";import{u as v}from"./useTrans-BkTq1qdy.js";import{A as k}from"./AppModal-CrBGLZT4.js";function P({isOpen:m,onClose:i,feedback:r}){const{t:a}=v(),{data:t,setData:o,post:g,errors:l,reset:n,processing:c}=f({customer_feedback:"",image:null,remove_image:!1,_method:"PUT"});if(b.useEffect(()=>{r&&m?o({customer_feedback:r.customer_feedback||"",image:null,remove_image:!1,_method:"PUT"}):m||n()},[r,m]),!r)return null;const x=s=>{s.preventDefault(),g(route("admin.customer-feedbacks.update",r.id),{onSuccess:()=>{n(),i()},forceFormData:!0})};return e.jsx(k,{isOpen:m,onClose:i,title:a("edit_customer_feedback"),icon:"fa-pen-to-square",size:"md",children:e.jsxs("form",{onSubmit:x,children:[e.jsxs("div",{className:"mb-4",children:[e.jsx(u,{htmlFor:"customer_feedback",value:a("customer_feedback_text")}),e.jsx(p,{id:"customer_feedback",name:"customer_feedback",value:t.customer_feedback,className:"mt-1 block w-full",onChange:s=>o("customer_feedback",s.target.value),placeholder:a("enter_customer_feedback"),rows:4}),e.jsx(d,{message:l.customer_feedback,className:"mt-2"})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx(u,{value:a("image")}),r?.image&&!t.image&&!t.remove_image&&e.jsxs("div",{className:"mb-2",children:[e.jsxs("p",{className:"text-sm text-neutral-600 dark:text-neutral-400 mb-1",children:[a("current_image"),":"]}),e.jsxs("div",{className:"relative inline-block",children:[e.jsx("img",{src:`/storage/${r.image}`,alt:"Current",className:"h-32 w-32 object-cover rounded-lg border border-neutral-300 dark:border-neutral-600"}),e.jsx("button",{type:"button",onClick:()=>o("remove_image",!0),className:"absolute top-1 right-1 bg-red-500 text-white rounded-full w-6 h-6 flex items-center justify-center text-xs hover:bg-red-600",title:a("delete"),children:e.jsx("i",{className:"fa-solid fa-xmark"})})]})]}),e.jsx(h,{id:"image",accept:"image/*",onChange:s=>o("image",s||null),value:t.image,maxFiles:1,helperText:a("image_optional")}),t.image&&e.jsxs("div",{className:"mt-2",children:[e.jsxs("p",{className:"text-sm text-neutral-600 dark:text-neutral-400 mb-1",children:[a("new_image_preview"),":"]}),e.jsx("img",{src:URL.createObjectURL(t.image),alt:"Preview",className:"h-32 w-32 object-cover rounded-lg border border-orange-400 dark:border-orange-600"})]}),e.jsx(d,{message:l.image,className:"mt-2"})]}),e.jsx(d,{message:l.general,className:"mt-2"}),e.jsxs("div",{className:"flex justify-end gap-2 mt-6",children:[e.jsx(_,{type:"button",onClick:i,icon:"fa-xmark",rounded:"rounded-lg",disabled:c,children:a("cancel")}),e.jsx(j,{type:"submit",icon:"fa-floppy-disk",rounded:"rounded-lg",withShadow:!1,disabled:c,children:a(c?"updating":"save_changes")})]})]})})}export{P as default};
