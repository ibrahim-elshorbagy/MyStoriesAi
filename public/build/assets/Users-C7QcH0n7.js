import{u as U,r as T,j as r,H as K}from"./app-CmjdSMvU.js";import{A as V}from"./AppLayout-DhxeLfmi.js";import{u as _}from"./useTrans-BkTq1qdy.js";import{g as G,m as W,c as y,a as X,n as Y,e as F,S as J,b as Q}from"./swiper-CM9D1awn.js";import{c as Z}from"./create-element-if-not-defined-CSXJi8d0.js";import{S as O}from"./SearchBar-CpDbnyHj.js";import{P}from"./PrimaryButton-DmmwwnBh.js";import ee from"./CreateModal-CTzfUXA4.js";import se from"./EditModal-Blui_VJY.js";import H from"./UsersTable-D11_6OAX.js";import"./ApplicationLogo-XwI7EIx0.js";import"./Toastify-Cqr0u1IV.js";import"./CookieModal-DPznALOx.js";import"./AppModal-CrBGLZT4.js";import"./SecondaryButton-CKGMLTKC.js";import"./InputError-MwXv_bOv.js";import"./InputLabel-DyeBRmEs.js";import"./TextInput-BzzhkyHX.js";import"./SelectInput-D_PXNFfA.js";import"./SelectableTable-0Fh5QZj0.js";import"./Pagination-B0sq9K_P.js";function ae(u){return u===void 0&&(u=""),`.${u.trim().replace(/([\.:!+\/()[\]])/g,"\\$1").replace(/ /g,".")}`}function re(u){let{swiper:e,extendParams:w,on:p,emit:f}=u;const c=G();let i=!1,m=null,j=null,D,d,b,v;w({scrollbar:{el:null,dragSize:"auto",hide:!1,draggable:!1,snapOnRelease:!0,lockClass:"swiper-scrollbar-lock",dragClass:"swiper-scrollbar-drag",scrollbarDisabledClass:"swiper-scrollbar-disabled",horizontalClass:"swiper-scrollbar-horizontal",verticalClass:"swiper-scrollbar-vertical"}}),e.scrollbar={el:null,dragEl:null};function x(){if(!e.params.scrollbar.el||!e.scrollbar.el)return;const{scrollbar:s,rtlTranslate:t}=e,{dragEl:a,el:l}=s,o=e.params.scrollbar,g=e.params.loop?e.progressLoop:e.progress;let h=d,n=(b-d)*g;t?(n=-n,n>0?(h=d-n,n=0):-n+d>b&&(h=b+n)):n<0?(h=d+n,n=0):n+d>b&&(h=b-n),e.isHorizontal()?(a.style.transform=`translate3d(${n}px, 0, 0)`,a.style.width=`${h}px`):(a.style.transform=`translate3d(0px, ${n}px, 0)`,a.style.height=`${h}px`),o.hide&&(clearTimeout(m),l.style.opacity=1,m=setTimeout(()=>{l.style.opacity=0,l.style.transitionDuration="400ms"},1e3))}function z(s){!e.params.scrollbar.el||!e.scrollbar.el||(e.scrollbar.dragEl.style.transitionDuration=`${s}ms`)}function C(){if(!e.params.scrollbar.el||!e.scrollbar.el)return;const{scrollbar:s}=e,{dragEl:t,el:a}=s;t.style.width="",t.style.height="",b=e.isHorizontal()?a.offsetWidth:a.offsetHeight,v=e.size/(e.virtualSize+e.params.slidesOffsetBefore-(e.params.centeredSlides?e.snapGrid[0]:0)),e.params.scrollbar.dragSize==="auto"?d=b*v:d=parseInt(e.params.scrollbar.dragSize,10),e.isHorizontal()?t.style.width=`${d}px`:t.style.height=`${d}px`,v>=1?a.style.display="none":a.style.display="",e.params.scrollbar.hide&&(a.style.opacity=0),e.params.watchOverflow&&e.enabled&&s.el.classList[e.isLocked?"add":"remove"](e.params.scrollbar.lockClass)}function E(s){return e.isHorizontal()?s.clientX:s.clientY}function S(s){const{scrollbar:t,rtlTranslate:a}=e,{el:l}=t;let o;o=(E(s)-F(l)[e.isHorizontal()?"left":"top"]-(D!==null?D:d/2))/(b-d),o=Math.max(Math.min(o,1),0),a&&(o=1-o);const g=e.minTranslate()+(e.maxTranslate()-e.minTranslate())*o;e.updateProgress(g),e.setTranslate(g),e.updateActiveIndex(),e.updateSlidesClasses()}function $(s){const t=e.params.scrollbar,{scrollbar:a,wrapperEl:l}=e,{el:o,dragEl:g}=a;i=!0,D=s.target===g?E(s)-s.target.getBoundingClientRect()[e.isHorizontal()?"left":"top"]:null,s.preventDefault(),s.stopPropagation(),l.style.transitionDuration="100ms",g.style.transitionDuration="100ms",S(s),clearTimeout(j),o.style.transitionDuration="0ms",t.hide&&(o.style.opacity=1),e.params.cssMode&&(e.wrapperEl.style["scroll-snap-type"]="none"),f("scrollbarDragStart",s)}function A(s){const{scrollbar:t,wrapperEl:a}=e,{el:l,dragEl:o}=t;i&&(s.preventDefault&&s.cancelable?s.preventDefault():s.returnValue=!1,S(s),a.style.transitionDuration="0ms",l.style.transitionDuration="0ms",o.style.transitionDuration="0ms",f("scrollbarDragMove",s))}function q(s){const t=e.params.scrollbar,{scrollbar:a,wrapperEl:l}=e,{el:o}=a;i&&(i=!1,e.params.cssMode&&(e.wrapperEl.style["scroll-snap-type"]="",l.style.transitionDuration=""),t.hide&&(clearTimeout(j),j=Y(()=>{o.style.opacity=0,o.style.transitionDuration="400ms"},1e3)),f("scrollbarDragEnd",s),t.snapOnRelease&&e.slideToClosest())}function L(s){const{scrollbar:t,params:a}=e,l=t.el;if(!l)return;const o=l,g=a.passiveListeners?{passive:!1,capture:!1}:!1,h=a.passiveListeners?{passive:!0,capture:!1}:!1;if(!o)return;const n=s==="on"?"addEventListener":"removeEventListener";o[n]("pointerdown",$,g),c[n]("pointermove",A,g),c[n]("pointerup",q,h)}function B(){!e.params.scrollbar.el||!e.scrollbar.el||L("on")}function I(){!e.params.scrollbar.el||!e.scrollbar.el||L("off")}function k(){const{scrollbar:s,el:t}=e;e.params.scrollbar=Z(e,e.originalParams.scrollbar,e.params.scrollbar,{el:"swiper-scrollbar"});const a=e.params.scrollbar;if(!a.el)return;let l;if(typeof a.el=="string"&&e.isElement&&(l=e.el.querySelector(a.el)),!l&&typeof a.el=="string"){if(l=c.querySelectorAll(a.el),!l.length)return}else l||(l=a.el);e.params.uniqueNavElements&&typeof a.el=="string"&&l.length>1&&t.querySelectorAll(a.el).length===1&&(l=t.querySelector(a.el)),l.length>0&&(l=l[0]),l.classList.add(e.isHorizontal()?a.horizontalClass:a.verticalClass);let o;l&&(o=l.querySelector(ae(e.params.scrollbar.dragClass)),o||(o=X("div",e.params.scrollbar.dragClass),l.append(o))),Object.assign(s,{el:l,dragEl:o}),a.draggable&&B(),l&&l.classList[e.enabled?"remove":"add"](...y(e.params.scrollbar.lockClass))}function N(){const s=e.params.scrollbar,t=e.scrollbar.el;t&&t.classList.remove(...y(e.isHorizontal()?s.horizontalClass:s.verticalClass)),I()}p("changeDirection",()=>{if(!e.scrollbar||!e.scrollbar.el)return;const s=e.params.scrollbar;let{el:t}=e.scrollbar;t=W(t),t.forEach(a=>{a.classList.remove(s.horizontalClass,s.verticalClass),a.classList.add(e.isHorizontal()?s.horizontalClass:s.verticalClass)})}),p("init",()=>{e.params.scrollbar.enabled===!1?M():(k(),C(),x())}),p("update resize observerUpdate lock unlock changeDirection",()=>{C()}),p("setTranslate",()=>{x()}),p("setTransition",(s,t)=>{z(t)}),p("enable disable",()=>{const{el:s}=e.scrollbar;s&&s.classList[e.enabled?"remove":"add"](...y(e.params.scrollbar.lockClass))}),p("destroy",()=>{N()});const R=()=>{e.el.classList.remove(...y(e.params.scrollbar.scrollbarDisabledClass)),e.scrollbar.el&&e.scrollbar.el.classList.remove(...y(e.params.scrollbar.scrollbarDisabledClass)),k(),C(),x()},M=()=>{e.el.classList.add(...y(e.params.scrollbar.scrollbarDisabledClass)),e.scrollbar.el&&e.scrollbar.el.classList.add(...y(e.params.scrollbar.scrollbarDisabledClass)),N()};Object.assign(e.scrollbar,{enable:R,disable:M,updateSize:C,setTranslate:x,init:k,destroy:N})}function le({tabs:u}){const{t:e}=_(),{locale:w}=U().props,[p,f]=T.useState(0),c=i=>{f(i)};return r.jsxs("div",{className:"w-full relative",children:[r.jsx("div",{className:"border-b border-neutral-300 dark:border-neutral-700 relative",children:r.jsx(J,{modules:[re],spaceBetween:10,slidesPerView:"auto",freeMode:!0,dir:w,wrapperClass:"!justify-start flex",onSwiper:i=>{setTimeout(()=>i.slideTo(1),800),setTimeout(()=>i.slideTo(0),1600)},children:u.map((i,m)=>r.jsx(Q,{className:"!w-auto",children:r.jsxs("button",{className:`inline-flex items-center px-4 py-2 text-sm font-medium rounded-t-lg ${p===m?"text-orange-500 border-b-2 border-orange-500 active dark:text-orange-400 dark:border-orange-400":"border-transparent hover:text-neutral-600 hover:border-neutral-300 dark:hover:text-neutral-300"}`,onClick:()=>c(m),children:[i.icon&&r.jsx("i",{className:`fa-solid ${i.icon} mx-2`}),i.translationKey?e(i.translationKey):i.title]})},m))})}),r.jsx("div",{className:"p-4",children:u.map((i,m)=>r.jsx("div",{className:p===m?"block":"hidden",children:i.content},m))})]})}function Se({auth:u,users:e,admins:w,roles:p,queryParams:f=null}){f=f||{};const{t:c}=_(),[i,m]=T.useState(!1),[j,D]=T.useState(!1),[d,b]=T.useState(null),v=()=>{m(!i)},x=(S=null)=>{b(S),D(!j)},z=r.jsxs("div",{children:[r.jsxs("div",{className:"flex justify-between items-center mb-4",children:[r.jsxs("h2",{className:"text-2xl font-bold leading-tight text-neutral-900 dark:text-neutral-100 flex items-center gap-2",children:[r.jsx("i",{className:"fa-solid fa-users text-blue-500"})," ",c("users")]}),r.jsx(P,{type:"button",onClick:v,icon:"fa-plus",size:"large",children:r.jsx("span",{className:"max-xs:hidden",children:c("create_user")})})]}),r.jsx("div",{className:"mb-4",children:r.jsx(O,{placeholder:c("search_users"),defaultValue:f.name||"",pageParam:"users_page",queryKey:"name",routeName:"admin.users.index",icon:"fa-magnifying-glass"})}),r.jsx(H,{users:e,onEdit:x,pageParam:"users_page"})]}),C=r.jsxs("div",{children:[r.jsxs("div",{className:"flex justify-between items-center mb-4",children:[r.jsxs("h2",{className:"text-2xl font-bold leading-tight text-neutral-900 dark:text-neutral-100 flex items-center gap-2",children:[r.jsx("i",{className:"fa-solid fa-user-shield text-red-500"})," ",c("admins")]}),r.jsx(P,{type:"button",onClick:v,icon:"fa-plus",size:"large",children:r.jsx("span",{className:"max-xs:hidden",children:c("create_user")})})]}),r.jsx("div",{className:"mb-4",children:r.jsx(O,{placeholder:c("search_admins"),defaultValue:f.name||"",queryKey:"name",routeName:"admin.users.index",icon:"fa-magnifying-glass"})}),r.jsx(H,{users:w,onEdit:x,pageParam:"admins_page"})]}),E=[{title:c("manage_users"),icon:"fa-users",content:z},{title:c("manage_admins"),icon:"fa-user-shield",content:C}];return r.jsxs(V,{user:u.user,children:[r.jsx(K,{title:c("user_management")}),r.jsx("div",{className:"m-3 xl:m-5",children:r.jsx("div",{className:"overflow-hidden rounded-2xl shadow-lg dark:bg-neutral-900 border border-neutral-300 dark:border-neutral-700",children:r.jsx("div",{className:"p-4 text-neutral-900 dark:text-neutral-100",children:r.jsx(le,{tabs:E})})})}),r.jsx(ee,{isOpen:i,onClose:v,roles:p}),r.jsx(se,{isOpen:j,onClose:()=>x(),user:d,roles:p})]})}export{Se as default};
