import{j as e,L as b,r as m,u as g,b as j}from"./app-Bj6znhMC.js";import{u as k}from"./useTrans-BkTq1qdy.js";import{A as y}from"./ApplicationLogo-Cf_2aZzo.js";import{T as w}from"./Toastify-C3VD4hQQ.js";import{C as _}from"./CookieModal-DQc62Lnd.js";function S({href:s,active:o,icon:t,children:i}){return e.jsxs(b,{href:s,className:`flex items-center rounded-xl gap-2 px-2 py-1.5 text-sm text-neutral-800 underline-offset-2 hover:bg-orange-500/5 hover:text-black focus-visible:underline focus:outline-hidden dark:text-neutral-300 dark:hover:bg-orange-400/5 dark:hover:text-neutral-100 ${o?"bg-orange-500/10 text-black dark:bg-orange-400/10 dark:text-neutral-100":""}`,children:[t&&e.jsx("i",{className:`fa-solid ${t} shrink-0`}),e.jsx("span",{children:i})]})}function C({href:s,active:o,children:t,badge:i,icon:a}){return e.jsx("li",{className:"px-1 py-0.5",children:e.jsxs(b,{href:s,className:`flex items-center rounded-xl gap-2 px-2 py-1.5 text-sm text-neutral-800 underline-offset-2 hover:bg-orange-500/5 hover:text-black focus-visible:underline focus:outline-hidden dark:text-neutral-300 dark:hover:bg-orange-400/5 dark:hover:text-neutral-100 ${o?"bg-orange-500/10 text-black dark:bg-orange-400/10 dark:text-neutral-100":""}`,children:[a&&e.jsx("i",{className:`fa-solid ${a} shrink-0 text-xs`}),e.jsx("span",{children:t}),i&&e.jsx("span",{className:"ml-auto font-bold",children:i})]})})}function E({item:s}){const o=s.submenu.some(n=>route().current(n.route)||route().current(n.route+".*")),t=route().current(s.route),[i,a]=m.useState(o||t||s.active||!1);return m.useEffect(()=>{(o||t)&&a(!0)},[o,t]),e.jsxs("div",{className:"flex flex-col",children:[e.jsxs("button",{type:"button",onClick:()=>a(n=>!n),className:`flex items-center justify-between rounded-xl gap-2 px-2 py-1.5 text-sm font-medium underline-offset-2 focus:outline-hidden focus-visible:underline ${i||o||t?"text-black bg-orange-500/10 dark:text-neutral-100 dark:bg-orange-400/10":"text-neutral-800 hover:bg-orange-500/5 hover:text-black dark:text-neutral-300 dark:hover:bg-orange-400/5 dark:hover:text-neutral-100"}`,children:[e.jsx("i",{className:`fa-solid ${s.icon} shrink-0`}),e.jsx("span",{className:"ltr:mr-auto ltr:text-left rtl:ml-auto rtl:text-right",children:s.name}),e.jsx("i",{className:`fa-solid fa-chevron-down transition-transform shrink-0 ${i?"rotate-180":"rotate-0"}`})]}),i&&e.jsx("ul",{className:"flex flex-col gap-0.5 mt-1",children:s.submenu.map(n=>e.jsx(C,{href:n.href,active:route().current(n.route)||route().current(n.route+".*"),icon:n.icon,children:n.name},n.route))})]})}function L({className:s=""}){const{t:o}=k(),[t,i]=m.useState(()=>typeof window<"u"?localStorage.theme==="dark"||localStorage.theme==="light"?localStorage.theme:window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light":"light");m.useEffect(()=>{const c=window.document.documentElement;t==="dark"?(c.classList.add("dark"),localStorage.theme="dark"):t==="light"?(c.classList.remove("dark"),localStorage.theme="light"):(window.matchMedia("(prefers-color-scheme: dark)").matches?c.classList.add("dark"):c.classList.remove("dark"),localStorage.removeItem("theme"))},[t]);const a=()=>{i(c=>c==="light"?"dark":"light")},n=()=>t==="dark"?"fa-moon":"fa-sun",u=()=>o(t==="dark"?"dark_mode":"light_mode");return e.jsxs("button",{onClick:a,className:`flex items-center gap-2 text-neutral-700 hover:text-neutral-900 dark:text-neutral-300 dark:hover:text-neutral-100 ${s}`,"aria-label":`Toggle to ${t==="dark"?"light":"dark"} theme`,title:`Switch to ${t==="dark"?"light":"dark"} mode`,children:[e.jsx("i",{className:`fa-solid ${n()}`}),e.jsx("span",{children:u()})]})}function $({className:s=""}){const{t:o}=k(),{locale:t,available_locales:i}=g().props,[a,n]=m.useState(!1),u=m.useRef(null),c=g(),f={en:{name:o("english"),flag:"ðŸ‡ºðŸ‡¸"},ar:{name:o("arabic"),flag:"ðŸ‡¸ðŸ‡¦"},de:{name:o("german"),flag:"ðŸ‡©ðŸ‡ª"}};m.useEffect(()=>{const d=l=>{u.current&&!u.current.contains(l.target)&&n(!1)};return document.addEventListener("mousedown",d),()=>document.removeEventListener("mousedown",d)},[]);const p=d=>{if(d!==t){const l=document.createElement("form");l.method="POST",l.action=route("locale.change");const r=document.createElement("input");r.type="hidden",r.name="_token",r.value=c.props.csrf_token,l.appendChild(r);const x=document.createElement("input");x.type="hidden",x.name="locale",x.value=d,l.appendChild(x),document.body.appendChild(l),l.submit()}n(!1)};return e.jsxs("div",{className:"relative",ref:u,children:[e.jsxs("button",{type:"button",onClick:()=>n(!a),className:`flex w-full items-center gap-2 text-neutral-700 hover:text-neutral-900 dark:text-neutral-300 dark:hover:text-neutral-100 ${s}`,"aria-label":"Select language",title:"Select language",children:[e.jsx("i",{className:"fa-solid fa-language shrink-0"}),e.jsxs("span",{children:[f[t]?.flag," ",f[t]?.name]}),e.jsx("i",{className:`fa-solid fa-chevron-${a?"up":"down"} text-xs ltr:ml-auto rtl:mr-auto shrink-0`})]}),a&&e.jsx("div",{className:"absolute right-0 mt-2 w-48 bg-white dark:bg-neutral-800 rounded-lg shadow-lg border border-neutral-200 dark:border-neutral-700 z-50",children:Object.entries(f).map(([d,{name:l,flag:r}])=>e.jsxs("button",{onClick:()=>p(d),className:`w-full text-left px-4 py-2 hover:bg-neutral-100 dark:hover:bg-neutral-700 flex items-center gap-2 first:rounded-t-lg last:rounded-b-lg ${t===d?"bg-neutral-50 dark:bg-neutral-700":""}`,children:[e.jsx("span",{children:r}),e.jsx("span",{className:"text-neutral-700 dark:text-neutral-300",children:l}),t===d&&e.jsx("i",{className:"fa-solid fa-check ml-auto text-green-600 dark:text-green-400"})]},d))})]})}function N({position:s="sidebar"}){const{t:o}=k(),{auth:t,impersonate_admin_id:i}=g().props,[a,n]=m.useState(!1),u=m.useRef(null),c=!t.roles?.includes("admin")&&t.user?.tenant?route("tenant.profile.edit",{slug:t.user.tenant.slug}):route("profile.edit");m.useEffect(()=>{const l=x=>{x.key==="Escape"&&n(!1)},r=x=>{u.current&&!u.current.contains(x.target)&&n(!1)};if(a)return document.addEventListener("keydown",l),document.addEventListener("mousedown",r),()=>{document.removeEventListener("keydown",l),document.removeEventListener("mousedown",r)}},[a]);const f=()=>{j.post(route("logout"),{},{preserveScroll:!0})},p=s==="navbar"?"top-full mt-2 ltr:right-0 rtl:left-0":"md:bottom-0 ltr:md:right-[-195px] rtl:md:left-[-195px]",d=s==="navbar"?a?"-rotate-90":"rotate-90":a?"rotate-90":"ltr:rotate-90 rtl:rotate-90 ltr:md:rotate-0 rtl:md:rotate-180";return e.jsxs("div",{className:"mt-auto relative",ref:u,children:[e.jsxs("button",{type:"button",className:`flex w-full items-center rounded-xl gap-4 p-2 px-4 text-left text-neutral-800 hover:bg-orange-500/5 hover:text-black focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-orange-500 dark:text-neutral-300 dark:hover:bg-orange-400/5 dark:hover:text-neutral-100 dark:focus-visible:outline-orange-400 ${a?"bg-orange-500/10 dark:bg-orange-400/10":""}`,"aria-haspopup":"true","aria-expanded":a,onClick:()=>n(l=>!l),children:[t.user?.image_url?e.jsx("div",{className:"size-8 rounded-xl overflow-hidden flex items-center justify-center",children:e.jsx("img",{src:t.user.image_url,alt:t.user.name,className:"h-full w-full object-cover"})}):e.jsx("div",{className:"size-8 rounded-xl bg-orange-500 flex items-center justify-center text-white font-semibold",children:t.user?.name?.[0]?.toUpperCase()||"?"}),e.jsxs("div",{className:"flex flex-col",children:[e.jsx("span",{className:"text-sm font-bold text-black dark:text-neutral-100",children:t.user?.name||"Guest"}),e.jsx("span",{className:"sr-only",children:"profile settings"})]}),e.jsx("i",{className:`fa-solid fa-chevron-right rtl:mr-auto ltr:ml-auto shrink-0 transition-transform duration-200 ${d}`,"aria-hidden":"true"})]}),a&&e.jsxs("div",{className:`absolute w-full md:w-48 ${p} z-20 border divide-y divide-neutral-300 border-neutral-300 bg-neutral-100 dark:divide-neutral-700 dark:border-neutral-700 dark:bg-neutral-800 rounded-xl animate-fade-in`,role:"menu",children:[e.jsx("div",{className:"flex flex-col py-1.5",children:e.jsxs(b,{href:c,className:"flex items-center gap-2 px-2 py-1.5 text-sm font-medium text-neutral-800 underline-offset-2 hover:bg-orange-500/5 hover:text-black focus-visible:underline focus:outline-hidden dark:text-neutral-300 dark:hover:bg-orange-400/5 dark:hover:text-neutral-100",role:"menuitem",children:[e.jsx("i",{className:"fa-solid fa-user shrink-0","aria-hidden":"true"}),e.jsx("span",{children:o("profile")})]})}),e.jsx("div",{className:"flex flex-col py-1.5",children:e.jsx(L,{className:"w-full justify-start px-2 py-1.5 text-sm font-medium text-neutral-800 underline-offset-2 hover:bg-orange-500/5 hover:text-black focus-visible:underline focus:outline-hidden dark:text-neutral-300 dark:hover:bg-orange-400/5 dark:hover:text-neutral-100"})}),e.jsx("div",{className:"flex flex-col py-1.5",children:e.jsx($,{className:"w-full justify-start px-2 py-1.5 text-sm font-medium text-neutral-800 underline-offset-2 hover:bg-orange-500/5 hover:text-black focus-visible:underline focus:outline-hidden dark:text-neutral-300 dark:hover:bg-orange-400/5 dark:hover:text-neutral-100"})}),i&&e.jsx("div",{className:"flex flex-col py-1.5",children:e.jsxs("button",{onClick:()=>j.post(route("admin.return_to_admin"),{},{preserveScroll:!0}),className:"flex items-center gap-2 px-2 py-1.5 text-sm font-medium text-orange-800 underline-offset-2 hover:bg-orange-500/10 hover:text-orange-900 focus-visible:underline focus:outline-hidden dark:text-orange-300 dark:hover:bg-orange-400/10 dark:hover:text-orange-100",role:"menuitem",children:[e.jsx("i",{className:"fa-solid fa-user-shield shrink-0","aria-hidden":"true"}),e.jsx("span",{children:o("return_to_admin")})]})}),e.jsx("div",{className:"flex flex-col py-1.5",children:e.jsxs("button",{onClick:f,className:"flex items-center gap-2 px-2 py-1.5 text-sm font-medium text-neutral-800 underline-offset-2 hover:bg-orange-500/5 hover:text-black focus-visible:underline focus:outline-hidden dark:text-neutral-300 dark:hover:bg-orange-400/5 dark:hover:text-neutral-100",role:"menuitem",children:[e.jsx("i",{className:"fa-solid fa-right-from-bracket shrink-0","aria-hidden":"true"}),e.jsx("span",{children:o("sign_out")})]})})]})]})}function I({sidebarIsOpen:s,setSidebarIsOpen:o}){const{t}=k(),{auth:i}=g().props,[a,n]=m.useState(""),u=m.useRef(),c=i.roles||[],f=[{name:t("dashboard"),icon:"fa-chart-line",href:route("dashboard"),route:"dashboard",role:""},{name:t("my_orders"),icon:"fa-shopping-cart",href:route("user.orders.index"),route:"user.orders.*",role:"user"},{name:t("user_management"),icon:"fa-users",route:"admin.users.*",role:"admin",submenu:[{name:t("users"),href:route("admin.users.index"),route:"admin.users.*",icon:"fa-user"}]},{name:t("static_pages_management"),icon:"fa-file-alt",route:"admin.static-pages.*",role:"admin",submenu:[{name:t("static_page_categories"),href:route("admin.static-pages-categories.index"),route:"admin.static-pages-categories.*",icon:"fa-folder"},{name:t("static_pages"),href:route("admin.static-pages.index"),route:"admin.static-pages.*",icon:"fa-file"}]},{name:t("faq_management"),icon:"fa-question-circle",route:"admin.faq.*",role:"admin",submenu:[{name:t("faq_categories"),href:route("admin.faq-categories.index"),route:"admin.faq-categories.*",icon:"fa-folder"},{name:t("faq"),href:route("admin.faq.index"),route:"admin.faq.*",icon:"fa-question-circle"}]},{name:t("story_management"),icon:"fa-book-open",route:"admin.stories.*",role:"admin",submenu:[{name:t("stories"),href:route("admin.stories.index"),route:"admin.stories.*",icon:"fa-book"},{name:t("age_categories"),href:route("admin.age-categories.index"),route:"admin.age-categories.*",icon:"fa-layer-group"}]},{name:t("orders_management"),icon:"fa-shopping-cart",route:"admin.orders.*",role:"admin",submenu:[{name:t("orders"),href:route("admin.orders.index"),route:"admin.orders.*",icon:"fa-shopping-cart"}]},{name:t("site_settings"),icon:"fa-cogs",route:"admin.site-settings.*",role:"admin",submenu:[{name:t("site_settings"),href:route("admin.site-settings.index"),route:"admin.site-settings.*",icon:"fa-cogs"},{name:t("delivery_options"),href:route("admin.delivery-options.index"),route:"admin.delivery-options.*",icon:"fa-truck"},{name:t("customer_feedbacks"),href:route("admin.customer-feedbacks.index"),route:"admin.customer-feedbacks.*",icon:"fa-comments"},{name:t("discounts"),href:route("admin.discounts.index"),route:"admin.discounts.*",icon:"fa-ticket"}]}],p=r=>r.role?c.includes(r.role):!0,d=m.useMemo(()=>f.filter(r=>p(r)),[f,c]),l=m.useMemo(()=>{if(!a)return[];const r=a.toLowerCase().trim(),x=[];return d.forEach(h=>{h.submenu?h.submenu.forEach(v=>{x.push({...v,parent:h.name,parentIcon:h.icon,icon:v.icon||h.icon})}):x.push(h)}),x.filter(h=>h.name.toLowerCase().includes(r)||h.parent&&h.parent.toLowerCase().includes(r))},[a,d]);return e.jsxs("nav",{className:`fixed left-0 z-30 flex min-h-svh w-60 shrink-0 flex-col border-r border-neutral-300 bg-neutral-200 p-4 transition-transform duration-300 md:w-64 md:translate-x-0 md:relative dark:border-neutral-700 dark:bg-neutral-900 ${s?"translate-x-0":"-translate-x-60"}`,"aria-label":"sidebar navigation",children:[e.jsx("div",{className:"flex items-center justify-center mb-4",children:e.jsx(b,{href:route("home"),className:"ml-2 w-48 text-2xl font-bold text-black dark:text-neutral-100",children:e.jsx(y,{})})}),e.jsxs("div",{className:"relative flex w-full max-w-xs flex-col gap-1 text-neutral-800 dark:text-neutral-300",children:[e.jsx("i",{className:"fa-solid fa-search absolute left-2 top-1/2 -translate-y-1/2 text-neutral-800/50 dark:text-neutral-300/50"}),e.jsx("input",{type:"search",ref:u,value:a,onChange:r=>n(r.target.value),className:"w-full border border-neutral-300 rounded-xl bg-neutral-100 px-2 py-1.5 pl-9 text-sm focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-orange-500 disabled:cursor-not-allowed disabled:opacity-75 dark:border-neutral-700 dark:bg-neutral-800/50 dark:focus-visible:outline-orange-400",placeholder:t("search_navigation"),"aria-label":"Search"}),a&&l.length>0&&e.jsx("div",{className:"absolute top-full left-0 right-0 mt-2 bg-white dark:bg-neutral-800 border border-neutral-300 dark:border-neutral-700 rounded-lg shadow-lg z-50 max-h-64 overflow-y-auto",children:l.map(r=>e.jsxs(b,{href:r.href||"#",onClick:()=>n(""),className:"flex items-center gap-3 px-3 py-2 text-sm text-neutral-700 dark:text-neutral-300 hover:bg-neutral-100 dark:hover:bg-neutral-700 transition-colors first:rounded-t-lg last:rounded-b-lg",children:[e.jsx("i",{className:`fa-solid ${r.icon} shrink-0`}),e.jsxs("div",{className:"flex flex-col",children:[e.jsx("span",{children:r.name}),r.parent&&e.jsx("span",{className:"text-xs text-neutral-500 dark:text-neutral-400",children:r.parent})]})]},r.route))}),a&&l.length===0&&e.jsx("div",{className:"absolute top-full left-0 right-0 mt-2 bg-white dark:bg-neutral-800 border border-neutral-300 dark:border-neutral-700 rounded-lg shadow-lg z-50 px-3 py-4 text-center text-sm text-neutral-500 dark:text-neutral-400",children:t("no_results_for",{query:a})})]}),!a&&e.jsx("div",{className:"flex flex-col gap-2 overflow-y-auto pb-6 mt-4",children:d.map(r=>r.submenu?e.jsx(E,{item:r},r.name):e.jsx(S,{href:r.href,active:route().current(r.route),icon:r.icon,children:r.name},r.name))})]})}function T(){const{cart_count:s}=g().props;return e.jsxs("nav",{className:"max-md:hidden flex items-center justify-between px-4 py-3 bg-white dark:bg-neutral-900 border-b border-neutral-200 dark:border-neutral-800 h-auto sticky top-0 z-30",children:[e.jsxs(b,{href:route("cart.index"),className:"relative inline-flex items-center px-3 py-2 text-neutral-700 dark:text-neutral-300 hover:text-orange-600 dark:hover:text-orange-400 transition-colors",children:[e.jsx("i",{className:"fa-solid fa-shopping-cart text-xl"}),s>0&&e.jsx("span",{className:"absolute -top-2 -right-2 bg-gradient-to-r from-orange-500 to-orange-600 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center shadow-lg",children:s>9?"9+":s})]}),e.jsx(N,{position:"navbar"})]})}function A({children:s,title:o}){const{locale:t}=g().props,{t:i}=k(),{auth:a}=g().props,[n,u]=m.useState(!1),c=()=>{u(p=>!p)},{cart_count:f}=g().props;return e.jsxs("div",{className:"font-sans antialiased",dir:t==="ar"?"rtl":"ltr",children:[e.jsxs("div",{className:" bg-gray-100 dark:bg-neutral-800 min-h-[100vh]",children:[e.jsxs("nav",{className:"md:hidden flex items-center justify-between px-4 py-3 bg-white dark:bg-neutral-900 border-b border-neutral-200 dark:border-neutral-800 sticky top-0 z-40",children:[e.jsx("button",{type:"button",className:"p-2 rounded-lg text-neutral-600 hover:text-neutral-900 hover:bg-neutral-50 dark:text-neutral-300 dark:hover:text-neutral-100 dark:hover:bg-neutral-800 focus:outline-none focus:ring-2 focus:ring-orange-500","aria-label":i("open_sidebar"),onClick:c,children:e.jsx("i",{className:"fa-solid fa-bars size-6"})}),e.jsxs(b,{href:route("cart.index"),className:"relative inline-flex items-center justify-center w-12 h-12 text-neutral-700 dark:text-neutral-300",children:[e.jsx("i",{className:"fa-solid fa-shopping-cart text-2xl"}),f>0&&e.jsx("span",{className:"absolute top-1 right-1 bg-gradient-to-r from-orange-500 to-orange-600 text-white text-xs font-bold rounded-full h-5 min-w-[20px] px-1 flex items-center justify-center",children:f>99?"99+":f})]}),e.jsx(N,{})]}),n&&e.jsx("div",{className:"fixed inset-0 z-20 bg-neutral-800/10 backdrop-blur-xs md:hidden","aria-hidden":"true",onClick:()=>u(!1),style:{transition:"opacity 0.2s"}}),e.jsxs("div",{className:"relative flex w-full flex-col md:flex-row min-h-screen",children:[e.jsx(I,{sidebarIsOpen:n,setSidebarIsOpen:u}),e.jsxs("div",{className:"flex-1 flex flex-col min-w-0 relative",children:[e.jsx(T,{}),e.jsx("main",{className:"flex-1 w-full",children:s})]})]})]}),e.jsx(w,{}),e.jsx(_,{})]})}export{A,L as T};
