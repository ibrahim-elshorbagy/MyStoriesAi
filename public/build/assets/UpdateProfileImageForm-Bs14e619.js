import{u as N,r as d,a as w,j as e}from"./app-BIjIVRtH.js";import{u as _}from"./useTrans-BkTq1qdy.js";import{I as y,a as k}from"./InputLabel-40hQBXBN.js";import{P as F}from"./PrimaryButton-kolRTYFP.js";function D({className:u=""}){const r=N().props.auth.user,{t:a}=_(),s=d.useRef(),{data:t,setData:g,post:x,processing:n,errors:p,reset:f,recentlySuccessful:h}=w({image:null,_method:"POST"}),[o,m]=d.useState(null),j=l=>{const i=l.target.files[0];if(i){g("image",i);const c=new FileReader;c.onload=v=>{m(v.target.result)},c.readAsDataURL(i)}},b=l=>{console.log("Submitting form with image:",t.image),l.preventDefault(),x(route("profile.image.update"),{preserveScroll:!0,forceFormData:!0,onSuccess:()=>{f("image"),m(null),s.current&&(s.current.value="")}})};return e.jsxs("section",{className:`space-y-6 ${u}`,children:[e.jsxs("header",{children:[e.jsx("h2",{className:"text-lg font-medium text-neutral-900 dark:text-neutral-100",children:a("profile_image")}),e.jsx("p",{className:"mt-1 text-sm text-neutral-600 dark:text-neutral-400",children:a("update_profile_image")})]}),e.jsxs("form",{onSubmit:b,className:"mt-6 space-y-6",children:[e.jsxs("div",{children:[e.jsx(y,{htmlFor:"image",value:a("profile_image")}),e.jsxs("div",{className:"mt-2 flex items-center gap-6",children:[r.image_url?e.jsx("div",{children:e.jsx("img",{src:r.image_url,alt:r.name,className:"h-20 w-20 rounded-full object-cover border-2 border-neutral-200 dark:border-neutral-700"})}):e.jsx("div",{className:"h-20 w-20 text-white rounded-full bg-orange-200 dark:bg-orange-700 flex items-center justify-center",children:e.jsx("span",{className:"text-neutral-500 dark:text-neutral-400 text-2xl",children:r.name?r.name.charAt(0).toUpperCase():"?"})}),o&&e.jsx("div",{children:e.jsx("img",{src:o,alt:"Preview",className:"h-20 w-20 rounded-full object-cover border-2 border-orange-400 dark:border-orange-600"})})]}),e.jsxs("div",{className:"mt-4",children:[e.jsx("input",{id:"image",type:"file",ref:s,className:"hidden",onChange:j,accept:"image/*"}),e.jsxs("label",{htmlFor:"image",className:"inline-flex items-center gap-2 px-4 py-2 bg-orange-600 text-white rounded-md cursor-pointer hover:bg-orange-700",children:[e.jsx("i",{className:"fas fa-upload"}),a("choose_file")]}),e.jsx(k,{message:p.image,className:"mt-2"})]})]}),e.jsxs("div",{className:"flex items-center gap-4",children:[t.image&&e.jsx(F,{type:"submit",disabled:!t.image||n,children:a(n?"uploading":"save_changes")}),h&&e.jsx("p",{className:"text-sm text-orange-600 dark:text-orange-400",children:a("saved_successfully")})]})]})]})}export{D as default};
