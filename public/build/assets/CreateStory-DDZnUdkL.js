import{a as q,r as g,j as e,H as A,L as p}from"./app-CmjdSMvU.js";import{A as E}from"./AppLayout-DhxeLfmi.js";import{u as I}from"./useTrans-BkTq1qdy.js";import{I as o}from"./InputLabel-DyeBRmEs.js";import{T as f}from"./TextInput-BzzhkyHX.js";import{S as _}from"./SelectInput-D_PXNFfA.js";import{I as i}from"./InputError-MwXv_bOv.js";import{P as R}from"./PrimaryButton-DmmwwnBh.js";import{S}from"./SecondaryButton-CKGMLTKC.js";import{D as c}from"./DragFileInput-BCATiycV.js";import{T as v}from"./TextArea-BKXniEHM.js";import"./ApplicationLogo-XwI7EIx0.js";import"./Toastify-Cqr0u1IV.js";import"./CookieModal-DPznALOx.js";import"./AppModal-CrBGLZT4.js";function W({categories:h=[]}){const{t}=I(),{data:l,setData:r,post:j,errors:s,processing:x}=q({title_ar:"",title_en:"",excerpt_ar:"",excerpt_en:"",content_ar:"",content_en:"",category_id:"",gender:"",status:"draft",cover_image_ar:null,cover_image_en:null,gallery_images_ar:[],gallery_images_en:[],pdf_ar:null,pdf_en:null}),m=g.useRef(null),u=g.useRef(null);g.useEffect(()=>{const a=document.createElement("script");return a.src="https://cdnjs.cloudflare.com/ajax/libs/tinymce/6.8.3/tinymce.min.js",a.async=!0,a.onload=()=>b(),document.body.appendChild(a),()=>{window.tinymce&&window.tinymce.remove()}},[]);const b=()=>{if(!window.tinymce)return;const a={height:600,menubar:!0,plugins:["advlist","autolink","lists","link","image","charmap","preview","anchor","searchreplace","visualblocks","code","fullscreen","insertdatetime","media","table","help","wordcount","directionality"],toolbar:"undo redo | blocks | bold italic forecolor | alignleft aligncenter alignright alignjustify | ltr rtl | bullist numlist outdent indent | image media table | removeformat | help",content_style:"body { font-family:Helvetica,Arial,sans-serif; font-size:14px }",automatic_uploads:!1,images_dataimg_filter:function(n){return n.hasAttribute("internal-blob")},images_upload_handler:function(n,C,F){const d=new FileReader;d.onload=function(){C(d.result)},d.onerror=function(){F("Failed to convert image to base64")},d.readAsDataURL(n.blob())},paste_data_images:!0};window.tinymce.init({...a,selector:"#content_ar",directionality:"rtl",setup:n=>{m.current=n,n.on("change",()=>{r("content_ar",n.getContent())})}}),window.tinymce.init({...a,selector:"#content_en",directionality:"ltr",setup:n=>{u.current=n,n.on("change",()=>{r("content_en",n.getContent())})}})},y=a=>{a.preventDefault(),m.current&&r("content_ar",m.current.getContent()),u.current&&r("content_en",u.current.getContent()),j(route("admin.stories.store"))},N=h.map(a=>({value:a.id,label:a.name_value})),w=[{value:"",label:t("select_gender")},{value:"0",label:t("boy")},{value:"1",label:t("girl")}],k=[{value:"draft",label:t("draft")},{value:"published",label:t("published")},{value:"archived",label:t("archived")}];return e.jsxs(E,{children:[e.jsx(A,{title:t("create_story")}),e.jsx("div",{className:"m-3 xl:m-5",children:e.jsx("div",{className:"overflow-hidden rounded-2xl shadow-lg dark:bg-neutral-900 border border-neutral-300 dark:border-neutral-700",children:e.jsxs("div",{className:"p-6 text-neutral-900 dark:text-neutral-100",children:[e.jsx("div",{className:"flex items-center justify-between mb-6",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs(p,{href:route("admin.stories.index"),className:"flex items-center text-neutral-600 hover:text-neutral-900 dark:text-neutral-400 dark:hover:text-neutral-100 transition-colors",children:[e.jsx("i",{className:"fa-solid fa-arrow-left rtl:rotate-180 mx-2"}),t("stories")]}),e.jsx("span",{className:"text-neutral-400 dark:text-neutral-600",children:"/"}),e.jsxs("h1",{className:"text-2xl font-bold leading-tight text-neutral-900 dark:text-neutral-100",children:[e.jsx("i",{className:"fa-solid fa-plus text-green-500 mx-2"}),t("create_story")]})]})}),e.jsxs("form",{onSubmit:y,className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx(o,{htmlFor:"title_ar",value:t("story_title_ar"),required:!0}),e.jsx(f,{id:"title_ar",type:"text",name:"title_ar",value:l.title_ar,className:"mt-1 block w-full",onChange:a=>r("title_ar",a.target.value),required:!0}),e.jsx(i,{message:s.title_ar,className:"mt-2"})]}),e.jsxs("div",{children:[e.jsx(o,{htmlFor:"title_en",value:t("story_title_en"),required:!0}),e.jsx(f,{id:"title_en",type:"text",name:"title_en",value:l.title_en,className:"mt-1 block w-full",onChange:a=>r("title_en",a.target.value),required:!0}),e.jsx(i,{message:s.title_en,className:"mt-2"})]}),e.jsxs("div",{children:[e.jsx(_,{name:"category_id",label:t("category"),value:l.category_id,onChange:a=>r("category_id",a.target.value),options:[{value:"",label:t("select_category")},...N],icon:"fa-layer-group",required:!0}),e.jsx(i,{message:s.category_id,className:"mt-2"})]}),e.jsxs("div",{children:[e.jsx(_,{name:"gender",label:t("gender"),value:l.gender,onChange:a=>r("gender",a.target.value),options:w,icon:"fa-venus-mars"}),e.jsx(i,{message:s.gender,className:"mt-2"})]}),e.jsxs("div",{className:"lg:col-span-2",children:[e.jsx(_,{name:"status",label:t("status"),value:l.status,onChange:a=>r("status",a.target.value),options:k,icon:"fa-circle-check",required:!0}),e.jsx(i,{message:s.status,className:"mt-2"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx(o,{htmlFor:"excerpt_ar",value:t("story_excerpt_ar"),required:!0}),e.jsx(v,{name:"excerpt_ar",label:t("story_excerpt_ar"),value:l.excerpt_ar,onChange:a=>r("excerpt_ar",a.target.value),rows:3}),e.jsx(i,{message:s.excerpt_ar,className:"mt-2"})]}),e.jsxs("div",{children:[e.jsx(o,{htmlFor:"excerpt_en",value:t("story_excerpt_en"),required:!0}),e.jsx(v,{name:"excerpt_en",label:t("story_excerpt_en"),value:l.excerpt_en,onChange:a=>r("excerpt_en",a.target.value),rows:3}),e.jsx(i,{message:s.excerpt_en,className:"mt-2"})]})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx(o,{htmlFor:"content_ar",value:t("story_content_ar"),required:!0}),e.jsx("div",{className:"no-tailwindcss-support-display",children:e.jsx("textarea",{id:"content_ar",name:"content_ar",className:"mt-1 block w-full"})}),e.jsx(i,{message:s.content_ar,className:"mt-2"})]}),e.jsxs("div",{children:[e.jsx(o,{htmlFor:"content_en",value:t("story_content_en"),required:!0}),e.jsx("div",{className:"no-tailwindcss-support-display",children:e.jsx("textarea",{id:"content_en",name:"content_en",className:"mt-1 block w-full "})}),e.jsx(i,{message:s.content_en,className:"mt-2"})]})]}),e.jsxs("div",{className:"space-y-6 p-6 bg-neutral-50 dark:bg-neutral-800/50 rounded-lg border border-neutral-200 dark:border-neutral-700",children:[e.jsxs("h3",{className:"text-lg font-semibold text-neutral-900 dark:text-neutral-100 border-b border-neutral-200 dark:border-neutral-700 pb-2",children:[e.jsx("i",{className:"fa-solid fa-file-arrow-up text-blue-500 me-2"}),t("files")]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsx("div",{children:e.jsx(c,{id:"cover_image_ar",label:t("cover_image_ar"),accept:"image/*",onChange:a=>r("cover_image_ar",a),error:s.cover_image_ar,value:l.cover_image_ar})}),e.jsx("div",{children:e.jsx(c,{id:"cover_image_en",label:t("cover_image_en"),accept:"image/*",onChange:a=>r("cover_image_en",a),error:s.cover_image_en,value:l.cover_image_en})})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsx("div",{children:e.jsx(c,{id:"gallery_images_ar",label:t("gallery_images_ar"),accept:"image/*",multiple:!0,showMaxFiles:!1,onChange:a=>r("gallery_images_ar",a),error:s.gallery_images_ar,value:l.gallery_images_ar})}),e.jsx("div",{children:e.jsx(c,{id:"gallery_images_en",label:t("gallery_images_en"),accept:"image/*",multiple:!0,showMaxFiles:!1,onChange:a=>r("gallery_images_en",a),error:s.gallery_images_en,value:l.gallery_images_en})})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsx("div",{children:e.jsx(c,{id:"pdf_ar",label:t("pdf_ar"),accept:".pdf",onChange:a=>r("pdf_ar",a),error:s.pdf_ar,value:l.pdf_ar})}),e.jsx("div",{children:e.jsx(c,{id:"pdf_en",label:t("pdf_en"),accept:".pdf",onChange:a=>r("pdf_en",a),error:s.pdf_en,value:l.pdf_en})})]})]}),e.jsxs("div",{className:"flex items-center justify-end gap-4 pt-6 border-t border-neutral-200 dark:border-neutral-700",children:[e.jsx(S,{icon:"fa-times",as:p,href:route("admin.stories.index"),children:t("cancel")}),e.jsx(R,{icon:"fa-save",type:"submit",disabled:x,children:t(x?"creating":"create_story")})]})]})]})})})]})}export{W as default};
