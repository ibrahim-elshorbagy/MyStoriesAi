import{a as b,r as f,j as e}from"./app-C4Ycdc6m.js";import{I as n}from"./InputLabel-Dgt0hMAg.js";import{T as h}from"./TextArea-Dx8qhYwI.js";import{D as x}from"./DragFileInput-D6pFa-5W.js";import{I as m}from"./InputError-BJ_YpF0r.js";import{P as j}from"./PrimaryButton-DCxXX-un.js";import{S as p}from"./SecondaryButton-ZNZxTG2t.js";import{u as _}from"./useTrans-BkTq1qdy.js";import{A as N}from"./AppModal-DatsrQYw.js";function E({isOpen:l,onClose:d,feedback:s}){const{t:r}=_(),{data:a,setData:o,post:v,errors:i,reset:u,processing:c}=b({customer_feedback:"",image:null,video:null,remove_image:!1,remove_video:!1,_method:"PUT"});if(f.useEffect(()=>{s&&l?o({customer_feedback:s.customer_feedback||"",image:null,video:null,remove_image:!1,remove_video:!1,_method:"PUT"}):l||u()},[s,l]),!s)return null;const g=t=>{t.preventDefault(),v(route("admin.customer-feedbacks.update",s.id),{onSuccess:()=>{u(),d()},forceFormData:!0})};return e.jsx(N,{isOpen:l,onClose:d,title:r("edit_customer_feedback"),icon:"fa-pen-to-square",size:"md",children:e.jsxs("form",{onSubmit:g,children:[e.jsxs("div",{className:"mb-4",children:[e.jsx(n,{htmlFor:"customer_feedback",value:r("customer_feedback_text")}),e.jsx(h,{id:"customer_feedback",name:"customer_feedback",value:a.customer_feedback,className:"mt-1 block w-full",onChange:t=>o("customer_feedback",t.target.value),placeholder:r("enter_customer_feedback"),rows:4}),e.jsx(m,{message:i.customer_feedback,className:"mt-2"})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx(n,{value:r("image")}),s?.image&&!a.image&&!a.remove_image&&e.jsxs("div",{className:"mb-2",children:[e.jsxs("p",{className:"text-sm text-neutral-600 dark:text-neutral-400 mb-1",children:[r("current_image"),":"]}),e.jsxs("div",{className:"relative inline-block",children:[e.jsx("img",{src:`/storage/${s.image}`,alt:"Current",className:"h-32 w-32 object-cover rounded-lg border border-neutral-300 dark:border-neutral-600"}),e.jsx("button",{type:"button",onClick:()=>o("remove_image",!0),className:"absolute top-1 right-1 bg-red-500 text-white rounded-full w-6 h-6 flex items-center justify-center text-xs hover:bg-red-600",title:r("delete"),children:e.jsx("i",{className:"fa-solid fa-xmark"})})]})]}),e.jsx(x,{id:"image",accept:"image/*",onChange:t=>o("image",t||null),value:a.image,maxFiles:1,helperText:r("image_optional")}),a.image&&e.jsxs("div",{className:"mt-2",children:[e.jsxs("p",{className:"text-sm text-neutral-600 dark:text-neutral-400 mb-1",children:[r("new_image_preview"),":"]}),e.jsx("img",{src:URL.createObjectURL(a.image),alt:"Preview",className:"h-32 w-32 object-cover rounded-lg border border-orange-400 dark:border-orange-600"})]}),e.jsx(m,{message:i.image,className:"mt-2"})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx(n,{value:r("video")}),s?.video&&!a.video&&!a.remove_video&&e.jsxs("div",{className:"mb-2",children:[e.jsxs("p",{className:"text-sm text-neutral-600 dark:text-neutral-400 mb-1",children:[r("current_video"),":"]}),e.jsxs("div",{className:"relative inline-block",children:[e.jsx("video",{src:`/storage/${s.video}`,controls:!0,className:"h-32 w-auto rounded-lg border border-neutral-300 dark:border-neutral-600"}),e.jsx("button",{type:"button",onClick:()=>o("remove_video",!0),className:"absolute top-1 right-1 bg-red-500 text-white rounded-full w-6 h-6 flex items-center justify-center text-xs hover:bg-red-600",title:r("delete"),children:e.jsx("i",{className:"fa-solid fa-xmark"})})]})]}),e.jsx(x,{id:"video",accept:"video/*",onChange:t=>o("video",t||null),value:a.video,maxFiles:1,helperText:r("video_optional")}),a.video&&e.jsxs("div",{className:"mt-2",children:[e.jsxs("p",{className:"text-sm text-neutral-600 dark:text-neutral-400 mb-1",children:[r("new_video_preview"),":"]}),e.jsx("video",{src:URL.createObjectURL(a.video),controls:!0,className:"h-32 w-auto rounded-lg border border-orange-400 dark:border-orange-600"})]}),e.jsx(m,{message:i.video,className:"mt-2"})]}),e.jsx(m,{message:i.general,className:"mt-2"}),e.jsxs("div",{className:"flex justify-end gap-2 mt-6",children:[e.jsx(p,{type:"button",onClick:d,icon:"fa-xmark",rounded:"rounded-lg",disabled:c,children:r("cancel")}),e.jsx(j,{type:"submit",icon:"fa-floppy-disk",rounded:"rounded-lg",withShadow:!1,disabled:c,children:r(c?"updating":"save_changes")})]})]})})}export{E as default};
