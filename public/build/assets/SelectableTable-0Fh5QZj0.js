import{j as e,L as Q,r as g,b as M}from"./app-CmjdSMvU.js";import{P as V}from"./Pagination-B0sq9K_P.js";import{u as K}from"./useTrans-BkTq1qdy.js";function O({variant:x="primary",className:s="",disabled:i,children:d,icon:h,size:p="xs",as:n="button",href:k,...f}){const y={primary:"bg-orange-100 text-orange-700 dark:bg-orange-900 dark:text-orange-300 hover:bg-orange-200 dark:hover:bg-orange-800",edit:"bg-orange-100 text-orange-700 dark:bg-orange-900 dark:text-orange-300 hover:bg-orange-200 dark:hover:bg-orange-800",delete:"bg-red-100 text-red-700 dark:bg-red-900 dark:text-red-300 hover:bg-red-200 dark:hover:bg-red-800",status:"bg-yellow-100 text-yellow-700 dark:bg-yellow-900 dark:text-yellow-300 hover:bg-yellow-200 dark:hover:bg-yellow-800",success:"bg-orange-100 text-orange-700 dark:bg-orange-900 dark:text-orange-300 hover:bg-orange-200 dark:hover:bg-orange-800",info:"bg-blue-100 text-blue-700 dark:bg-blue-900 dark:text-blue-300 hover:bg-blue-200 dark:hover:bg-blue-800"},j={xs:"px-2 py-1 text-xs",sm:"px-3 py-1.5 text-sm",md:"px-4 py-2 text-sm"},S=h?e.jsx("i",{className:`fa-solid ${h}`}):null,u=`flex items-center gap-1 ${j[p]} font-medium rounded-lg transition-all ${y[x]} ${i&&"opacity-70"} ${s}`;return n==="a"?e.jsxs(Q,{href:k,className:u,...f,children:[S,d]}):e.jsxs("button",{className:u,disabled:i,...f,children:[S,d]})}function W({onSort:x,sortField:s,sortDirection:i,perPage:d=15,totalItems:h=0,onPerPageChange:p,selectedItems:n=[],onSelectAll:k,bulkActions:f=[],onBulkAction:y,sortOptions:j=[],queryParams:S={},routeName:u,showSelection:U=!0,pageParam:z="page"}){const{t:l}=K(),[N,v]=g.useState(!1),[L,b]=g.useState(!1),[m,P]=g.useState(!1),C=[10,25,50,100],$=r=>{let o="asc";if(r===s&&i==="asc"&&(o="desc"),x)x(r,o);else if(u){let w={...Object.fromEntries(new URLSearchParams(window.location.search))};w.sort=r,w.direction=o,w[z]=1,M.get(route(u,route().params),w,{preserveState:!0,replace:!0})}b(!1)},B=r=>{if(p)p(r);else if(u){let o={...Object.fromEntries(new URLSearchParams(window.location.search))};o.per_page=r,o[z]=1,M.get(route(u,route().params),o,{preserveState:!0,replace:!0})}v(!1)},E=r=>{if(n.length!==0){if(r.requiresConfirmation){const o=r.confirmMessageKey?l(r.confirmMessageKey,{count:n.length}):r.confirmMessage||l("confirm_action",{count:n.length});if(!confirm(o))return}y(r,n),P(!1)}};g.useEffect(()=>{const r=()=>{v(!1),b(!1),P(!1)};return document.addEventListener("click",r),()=>{document.removeEventListener("click",r)}},[]);const A=r=>{r.stopPropagation()};return e.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-2 mb-4 text-sm",children:[e.jsx("div",{className:"flex items-center gap-2",children:U&&n.length>0?e.jsx("div",{className:"flex items-center gap-2",children:f.length>0&&e.jsxs("div",{className:"relative",onClick:A,children:[e.jsxs(O,{variant:"primary",icon:"fa-list-check",size:"sm",onClick:r=>{r.stopPropagation(),P(!m)},children:[l("bulk_actions")," (",n.length,")"]}),m&&e.jsx("div",{className:"absolute ltr:left-0 z-10 mt-1 w-48 rounded-lg shadow-lg bg-white dark:bg-neutral-800 border border-neutral-300 dark:border-neutral-700",children:e.jsx("div",{className:"py-1",children:f.map((r,o)=>e.jsxs("button",{className:`flex items-center w-full px-4 py-2 gap-2 ltr:text-left rtl:text-right text-sm hover:bg-neutral-100 dark:hover:bg-neutral-700 ${r.variant==="delete"?"text-red-600 dark:text-red-400":r.variant==="orange"?"text-orange-600 dark:text-orange-400":r.variant==="blue"?"text-blue-600 dark:text-blue-400":r.variant==="yellow"?"text-yellow-600 dark:text-yellow-400":"text-neutral-700 dark:text-neutral-200"}`,onClick:()=>E(r),children:[r.icon&&e.jsx("i",{className:` ${r.icon}`}),r.label]},o))})})]})}):e.jsxs("div",{className:"text-neutral-500 dark:text-neutral-400",children:[h," ",l(h!==1?"items":"item")]})}),e.jsxs("div",{className:"flex items-center gap-3",children:[j.length>0&&e.jsxs("div",{className:"relative",onClick:A,children:[e.jsxs(O,{variant:"primary",icon:"fa-sort",size:"sm",onClick:r=>{r.stopPropagation(),b(!L)},children:[l("sort"),s&&e.jsxs("span",{className:"hidden sm:inline ml-1",children:[l("by")," ",l(s)," ",i==="asc"?`↑ ${l("ascending")}`:`↓ ${l("descending")}`]})]}),L&&e.jsx("div",{className:"absolute right-0 z-10 mt-1 w-48 rounded-lg shadow-lg bg-white dark:bg-neutral-800 border border-neutral-300 dark:border-neutral-700",children:e.jsx("div",{className:"py-1",children:j.map(r=>e.jsxs("button",{className:`flex items-center w-full px-4 py-2 gap-2 text-left text-sm hover:bg-neutral-100 dark:hover:bg-neutral-700 ${s===r.field?"text-orange-600 dark:text-orange-400":"text-neutral-700 dark:text-neutral-200"}`,onClick:()=>$(r.field),children:[r.label,s===r.field&&e.jsx("i",{className:` fa-solid ${i==="asc"?"fa-arrow-up":"fa-arrow-down"}`})]},r.field))})})]}),e.jsxs("div",{className:"relative",onClick:A,children:[e.jsxs(O,{variant:"primary",icon:"fa-list-ol",size:"sm",className:"bg-neutral-200 text-neutral-700 dark:bg-neutral-700 dark:text-neutral-300 hover:bg-neutral-300 dark:hover:bg-neutral-600",onClick:r=>{r.stopPropagation(),v(!N)},children:[e.jsx("span",{children:d})," ",l("per_page")]}),N&&e.jsx("div",{className:"absolute right-0 z-10 mt-1 w-36 rounded-lg shadow-lg bg-white dark:bg-neutral-800 border border-neutral-300 dark:border-neutral-700",children:e.jsx("div",{className:"py-1",children:C.map(r=>e.jsx("button",{className:`flex w-full px-4 py-2 text-left text-sm hover:bg-neutral-100 dark:hover:bg-neutral-700 ${d===r?"text-orange-600 dark:text-orange-400":"text-neutral-700 dark:text-neutral-200"}`,onClick:()=>B(r),children:r},r))})})]})]})]})}function I({columns:x,data:s,onRowClick:i=null,routeName:d,queryParams:h={},renderRow:p=null,idField:n="id",pagination:k=null,onSort:f=null,bulkActions:y=[],sortOptions:j=[],defaultSortField:S=null,defaultSortDirection:u="asc",perPageOptions:U=[10,25,50,100],defaultPerPage:z=15,getRowClassName:l=null,showSelection:N=!0,pageParam:v="page"}){const{t:L}=K(),[b,m]=g.useState([]),[P,C]=g.useState(!1),[$,B]=g.useState(S||""),[E,A]=g.useState(u),[r,o]=g.useState(h.per_page||15);g.useEffect(()=>{m([]),C(!1)},[s]);const w=t=>{m(a=>{const c=t[n];return a.includes(c)?a.filter(q=>q!==c):[...a,c]})},R=()=>{P||b.length===s.length?(m([]),C(!1)):(m(s.map(t=>t[n])),C(!0))},T=(t,a)=>{if(B(t),A(a),f)f(t,a);else if(d){let c={...Object.fromEntries(new URLSearchParams(window.location.search))};c.sort=t,c.direction=a,c[v]=1,M.get(route(d,route().params),c,{preserveState:!0,replace:!0})}},D=t=>{if(o(t),d){let a={...Object.fromEntries(new URLSearchParams(window.location.search))};a.per_page=t,a[v]=1,M.get(route(d,route().params),a,{preserveState:!0,replace:!0})}},G=async(t,a)=>{t.handler&&(await t.handler(a),m([]))};return e.jsxs(e.Fragment,{children:[e.jsx(W,{onSort:T,sortField:$,sortDirection:E,perPage:r,totalItems:k?k.total:s.length,onPerPageChange:D,selectedItems:b,onSelectAll:R,bulkActions:y,onBulkAction:G,sortOptions:j,queryParams:h,routeName:d,pageParam:v}),e.jsx("div",{className:"overflow-auto",children:e.jsxs("table",{className:"w-full text-sm rtl:text-right ltr:text-left text-neutral-800 dark:text-neutral-200",children:[e.jsx("thead",{className:"text-neutral-700 uppercase border-b-2 border-neutral-500 bg-neutral-100 dark:bg-neutral-800 dark:text-neutral-300",children:e.jsxs("tr",{children:[N&&e.jsx("th",{className:"py-2 px-3 w-10",children:e.jsx("div",{className:"flex items-center",children:e.jsx("input",{type:"checkbox",className:"w-4 h-4 text-orange-600 bg-neutral-100 border-neutral-300 rounded focus:ring-orange-500 dark:focus:ring-orange-600 dark:ring-offset-neutral-800 dark:focus:ring-offset-neutral-800 focus:ring-2 dark:bg-neutral-700 dark:border-neutral-600",checked:s.length>0&&b.length===s.length,onChange:R})})}),x.map(t=>e.jsx("th",{className:`py-2 px-3 font-semibold text-nowrap ${t.className||""}`,children:e.jsxs("div",{className:"flex items-center gap-1",children:[t.icon&&e.jsx("i",{className:`fa-solid ${t.icon}`}),e.jsx("span",{children:t.label}),j.find(a=>a.field===t.field)&&e.jsx("button",{className:"ml-1",onClick:()=>T(t.field,$===t.field&&E==="asc"?"desc":"asc"),children:$===t.field?e.jsx("i",{className:`fa-solid fa-sort-${E==="asc"?"up":"down"} text-orange-500`}):e.jsx("i",{className:"fa-solid fa-sort text-neutral-400"})})]})},t.field))]})}),e.jsx("tbody",{children:s.length>0?s.map((t,a)=>{const c=b.includes(t[n]),q=l?l(t,a,c):"",H=a%2===0?"bg-neutral-100 dark:bg-neutral-800":"bg-neutral-50 dark:bg-neutral-900";return e.jsxs("tr",{className:`transition-colors ${q||H} border-b border-neutral-300 dark:border-neutral-800 ${c?"bg-orange-50 dark:bg-orange-950":""} ${i?"cursor-pointer":""}`,onClick:i?()=>i(t):void 0,children:[N&&e.jsx("td",{className:"px-3 py-2",onClick:_=>{_.stopPropagation(),w(t)},children:e.jsx("div",{className:"flex items-center",children:e.jsx("input",{type:"checkbox",className:"w-4 h-4 text-orange-600 bg-neutral-100 border-neutral-300 rounded focus:ring-orange-500 dark:focus:ring-orange-600 dark:ring-offset-neutral-800 dark:focus:ring-offset-neutral-800 focus:ring-2 dark:bg-neutral-700 dark:border-neutral-600",checked:c,onChange:()=>{}})})}),p?p(t,c,w):x.map((_,J)=>e.jsx("td",{className:"px-3 py-2",children:_.render?_.render(t):t[_.accessor]||"-"},J))]},t[n])}):e.jsx("tr",{children:e.jsxs("td",{colSpan:x.length+1,className:"px-3 py-2 text-center text-neutral-500 dark:text-neutral-400",children:[e.jsx("i",{className:"fa-regular fa-face-frown"})," ",L("no_items_found")]})})})]})}),k&&e.jsx(V,{links:k.links})]})}export{O as A,I as S};
