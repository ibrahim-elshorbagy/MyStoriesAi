import{r as o,j as e}from"./app-ueAuOMDT.js";function M({id:v,label:N,onChange:i,accept:r,error:p,required:D=!1,valid:F=!1,className:W="",helperText:k="",value:l=null,keyValue:w=null,disabled:d=!1,multiple:a=!1,showMaxFiles:S=!0,maxFiles:m=999,...E}){const c=o.useRef(null),[y,f]=o.useState(w?.name??null),[x,g]=o.useState(a?l||[]:null),[O,j]=o.useState(!1);o.useEffect(()=>{a?!l?.length&&c.current&&(c.current.value=""):!l&&c.current&&(c.current.value="")},[l,a]),o.useEffect(()=>{a?g(l||[]):f(l?.name??null)},[l,a]);const u=!!p,h=F&&!u,$=s=>{if(!d)if(a){const t=Array.from(s.target.files);b(t)}else{const t=s.target.files[0];if(t){if(r&&r.includes("image/")&&!t.type.startsWith("image/")&&!t.type.startsWith("video/")||r&&r.includes("video/")&&!t.type.startsWith("video/")&&!t.type.startsWith("image/"))return;f(t.name),i&&i(t)}}},b=s=>{if(!a||s.length===0)return;const t=[...x];s.forEach(n=>{if(t.length<m){if(r&&r.includes("image/")&&!n.type.startsWith("image/")&&!n.type.startsWith("video/")||r&&r.includes("video/")&&!n.type.startsWith("video/")&&!n.type.startsWith("image/"))return;t.push(n)}}),g(t),i&&i(t)},I=s=>{if(d||!a)return;const t=x.filter((n,z)=>z!==s);g(t),i&&i(t)},R=s=>{if(d)return 0;s.preventDefault(),j(!0)},V=s=>{s.preventDefault(),j(!1)},A=s=>{if(d)return;s.preventDefault(),j(!1);const t=Array.from(s.dataTransfer.files);if(a)b(t);else if(t.length>0){const n=t[0];if(r&&r.includes("image/")&&!n.type.startsWith("image/")&&!n.type.startsWith("video/")||r&&r.includes("video/")&&!n.type.startsWith("video/")&&!n.type.startsWith("image/"))return;f(n.name),i&&i(n)}},C=()=>{d||c.current?.click()};o.useEffect(()=>{a||f(l?.name??null)},[l,a]);const L=`
  ${d?"bg-gray-100 dark:bg-neutral-800 cursor-not-allowed":"bg-white dark:bg-neutral-900 cursor-pointer"}
    relative flex flex-col items-center justify-center p-8 border-2 border-dashed rounded-lg transition-colors
    ${O?"border-orange-400 bg-orange-50 dark:bg-orange-900/20":u?"border-red-300 hover:border-red-400 dark:border-red-600 dark:hover:border-red-500":h?"border-orange-300 hover:border-orange-400 dark:border-orange-600 dark:hover:border-orange-500":"border-neutral-300 hover:border-neutral-400 dark:border-neutral-600 dark:hover:border-neutral-500"}
  `;return e.jsxs("div",{className:`mb-4 ${W}`,children:[N&&e.jsxs("label",{htmlFor:v,className:"block mb-2 text-neutral-900 dark:text-neutral-100",children:[N," ",D&&e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs("div",{className:"relative",children:[e.jsxs("div",{className:L,onDragOver:R,onDragLeave:V,onDrop:A,onClick:C,children:[e.jsx("input",{ref:c,id:v,type:"file",accept:r,onChange:$,className:"hidden",disabled:d,multiple:a,...E}),e.jsx("div",{className:"mb-4",children:e.jsx("div",{children:e.jsx("i",{className:"fa-solid fa-cloud-upload-alt text-4xl text-orange-500 mb-2"})})}),e.jsx("div",{className:"text-center",children:a?e.jsxs("div",{className:"space-y-2",children:[e.jsxs("p",{className:"text-sm text-neutral-900 dark:text-neutral-100",children:["Drag and Drop files here or"," ",e.jsx("span",{className:"underline text-orange-600",children:"Choose files"})]}),e.jsxs("p",{className:"text-xs text-neutral-600 dark:text-neutral-400",children:["You can upload up to ",m," files"]}),r&&e.jsxs("p",{className:"text-xs text-neutral-600 dark:text-neutral-400",children:["Supported formats: ",r]})]}):y?e.jsxs("div",{className:"space-y-2",children:[e.jsxs("p",{className:"text-sm font-medium text-neutral-900 dark:text-neutral-100",children:["Selected: ",y]}),e.jsx("p",{className:"text-xs text-neutral-500 dark:text-neutral-400",children:"Click to change file or drag and drop a new one"})]}):e.jsxs("div",{className:"space-y-2",children:[e.jsxs("p",{className:"text-sm text-neutral-900 dark:text-neutral-100",children:["Drag and Drop file here or"," ",e.jsx("span",{className:"underline text-orange-600",children:"Choose file"})]}),r&&e.jsxs("p",{className:"text-xs text-neutral-600 dark:text-neutral-400",children:["Supported formats: ",r]})]})})]}),h&&e.jsx("div",{className:"absolute transform -translate-y-1/2 right-3 top-1/2",children:e.jsx("i",{className:"fa-solid fa-check-circle text-orange-500"})})]}),a&&x?.length>0&&e.jsxs("div",{className:"mt-3 space-y-2",children:[S&&e.jsxs("p",{className:"text-sm font-medium text-neutral-900 dark:text-neutral-100",children:["Selected files (",x.length,"/",m,"):"]}),e.jsx("div",{className:"space-y-1 max-h-40 overflow-y-auto",children:x.map((s,t)=>e.jsxs("div",{className:"flex items-center justify-between p-3 bg-neutral-50 dark:bg-neutral-800 rounded-lg",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-8 h-8 rounded bg-orange-100 dark:bg-orange-900/30 flex items-center justify-center",children:e.jsx("i",{className:"fa-solid fa-file text-orange-500 text-sm"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-neutral-900 dark:text-neutral-100 truncate max-w-xs",children:s.name}),e.jsxs("p",{className:"text-xs text-neutral-500 dark:text-neutral-400",children:[(s.size/(1024*1024)).toFixed(2)," MB"]})]})]}),e.jsx("button",{type:"button",onClick:n=>{n.stopPropagation(),I(t)},className:"p-1 text-neutral-400 hover:text-red-500 transition-colors",disabled:d,children:e.jsx("i",{className:"fa-solid fa-times"})})]},t))})]}),k&&!u&&!h&&e.jsx("div",{className:"mt-1 text-sm text-neutral-600 dark:text-neutral-400",children:k}),u&&e.jsx("div",{className:"mt-1 text-sm text-red-600 dark:text-red-400",children:p}),h&&!u&&e.jsx("div",{className:"mt-1 text-sm text-orange-600 dark:text-orange-400",children:a?`${x?.length||0} file(s) uploaded successfully`:"File uploaded successfully"})]})}export{M as D};
