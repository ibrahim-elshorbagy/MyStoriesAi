import{r as o,j as e}from"./app-DwKiVoIe.js";function M({id:N,label:v,onChange:i,accept:a,error:p,required:D=!1,valid:F=!1,className:w="",helperText:k="",value:n=null,keyValue:S=null,disabled:d=!1,multiple:s=!1,showMaxFiles:E=!0,maxFiles:h=999,...O}){const c=o.useRef(null),[b,u]=o.useState(S?.name??null),[x,g]=o.useState(s?n||[]:null),[$,j]=o.useState(!1);o.useEffect(()=>{s?!n?.length&&c.current&&(c.current.value=""):!n&&c.current&&(c.current.value="")},[n,s]),o.useEffect(()=>{s?g(n||[]):u(n?.name??null)},[n,s]);const f=!!p,m=F&&!f,I=t=>{if(!d)if(s){const r=Array.from(t.target.files);y(r)}else{const r=t.target.files[0];if(r){if(a&&a.includes("image/")&&!r.type.startsWith("image/"))return;u(r.name),i&&i(r)}}},y=t=>{if(!s||t.length===0)return;const r=[...x];t.forEach(l=>{if(r.length<h){if(a&&a.includes("image/")&&!l.type.startsWith("image/"))return;r.push(l)}}),g(r),i&&i(r)},R=t=>{if(d||!s)return;const r=x.filter((l,z)=>z!==t);g(r),i&&i(r)},V=t=>{if(d)return 0;t.preventDefault(),j(!0)},W=t=>{t.preventDefault(),j(!1)},A=t=>{if(d)return;t.preventDefault(),j(!1);const r=Array.from(t.dataTransfer.files);if(s)y(r);else if(r.length>0){const l=r[0];if(a&&a.includes("image/")&&!l.type.startsWith("image/"))return;u(l.name),i&&i(l)}},C=()=>{d||c.current?.click()};o.useEffect(()=>{s||u(n?.name??null)},[n,s]);const L=`
  ${d?"bg-gray-100 dark:bg-neutral-800 cursor-not-allowed":"bg-white dark:bg-neutral-900 cursor-pointer"}
    relative flex flex-col items-center justify-center p-8 border-2 border-dashed rounded-lg transition-colors
    ${$?"border-orange-400 bg-orange-50 dark:bg-orange-900/20":f?"border-red-300 hover:border-red-400 dark:border-red-600 dark:hover:border-red-500":m?"border-orange-300 hover:border-orange-400 dark:border-orange-600 dark:hover:border-orange-500":"border-neutral-300 hover:border-neutral-400 dark:border-neutral-600 dark:hover:border-neutral-500"}
  `;return e.jsxs("div",{className:`mb-4 ${w}`,children:[v&&e.jsxs("label",{htmlFor:N,className:"block mb-2 text-neutral-900 dark:text-neutral-100",children:[v," ",D&&e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs("div",{className:"relative",children:[e.jsxs("div",{className:L,onDragOver:V,onDragLeave:W,onDrop:A,onClick:C,children:[e.jsx("input",{ref:c,id:N,type:"file",accept:a,onChange:I,className:"hidden",disabled:d,multiple:s,...O}),e.jsx("div",{className:"mb-4",children:e.jsx("div",{children:e.jsx("i",{className:"fa-solid fa-cloud-upload-alt text-4xl text-orange-500 mb-2"})})}),e.jsx("div",{className:"text-center",children:s?e.jsxs("div",{className:"space-y-2",children:[e.jsxs("p",{className:"text-sm text-neutral-900 dark:text-neutral-100",children:["Drag and Drop files here or"," ",e.jsx("span",{className:"underline text-orange-600",children:"Choose files"})]}),e.jsxs("p",{className:"text-xs text-neutral-600 dark:text-neutral-400",children:["You can upload up to ",h," files"]}),a&&e.jsxs("p",{className:"text-xs text-neutral-600 dark:text-neutral-400",children:["Supported formats: ",a]})]}):b?e.jsxs("div",{className:"space-y-2",children:[e.jsxs("p",{className:"text-sm font-medium text-neutral-900 dark:text-neutral-100",children:["Selected: ",b]}),e.jsx("p",{className:"text-xs text-neutral-500 dark:text-neutral-400",children:"Click to change file or drag and drop a new one"})]}):e.jsxs("div",{className:"space-y-2",children:[e.jsxs("p",{className:"text-sm text-neutral-900 dark:text-neutral-100",children:["Drag and Drop file here or"," ",e.jsx("span",{className:"underline text-orange-600",children:"Choose file"})]}),a&&e.jsxs("p",{className:"text-xs text-neutral-600 dark:text-neutral-400",children:["Supported formats: ",a]})]})})]}),m&&e.jsx("div",{className:"absolute transform -translate-y-1/2 right-3 top-1/2",children:e.jsx("i",{className:"fa-solid fa-check-circle text-orange-500"})})]}),s&&x?.length>0&&e.jsxs("div",{className:"mt-3 space-y-2",children:[E&&e.jsxs("p",{className:"text-sm font-medium text-neutral-900 dark:text-neutral-100",children:["Selected files (",x.length,"/",h,"):"]}),e.jsx("div",{className:"space-y-1 max-h-40 overflow-y-auto",children:x.map((t,r)=>e.jsxs("div",{className:"flex items-center justify-between p-3 bg-neutral-50 dark:bg-neutral-800 rounded-lg",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-8 h-8 rounded bg-orange-100 dark:bg-orange-900/30 flex items-center justify-center",children:e.jsx("i",{className:"fa-solid fa-file text-orange-500 text-sm"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-neutral-900 dark:text-neutral-100 truncate max-w-xs",children:t.name}),e.jsxs("p",{className:"text-xs text-neutral-500 dark:text-neutral-400",children:[(t.size/(1024*1024)).toFixed(2)," MB"]})]})]}),e.jsx("button",{type:"button",onClick:l=>{l.stopPropagation(),R(r)},className:"p-1 text-neutral-400 hover:text-red-500 transition-colors",disabled:d,children:e.jsx("i",{className:"fa-solid fa-times"})})]},r))})]}),k&&!f&&!m&&e.jsx("div",{className:"mt-1 text-sm text-neutral-600 dark:text-neutral-400",children:k}),f&&e.jsx("div",{className:"mt-1 text-sm text-red-600 dark:text-red-400",children:p}),m&&!f&&e.jsx("div",{className:"mt-1 text-sm text-orange-600 dark:text-orange-400",children:s?`${x?.length||0} file(s) uploaded successfully`:"File uploaded successfully"})]})}export{M as D};
